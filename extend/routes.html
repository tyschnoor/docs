<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Routes and Content | Flarum Documentation</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.9a4817a9.css" as="style"><link rel="preload" href="/docs/assets/js/app.2d2bdfc6.js" as="script"><link rel="preload" href="/docs/assets/js/20.1af116b1.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.cda0d58d.js"><link rel="prefetch" href="/docs/assets/js/11.84d80c34.js"><link rel="prefetch" href="/docs/assets/js/12.39fe881a.js"><link rel="prefetch" href="/docs/assets/js/13.50cb6f88.js"><link rel="prefetch" href="/docs/assets/js/14.acd375b2.js"><link rel="prefetch" href="/docs/assets/js/15.8f178b07.js"><link rel="prefetch" href="/docs/assets/js/16.8da54367.js"><link rel="prefetch" href="/docs/assets/js/17.a393edcc.js"><link rel="prefetch" href="/docs/assets/js/18.3be6cf7d.js"><link rel="prefetch" href="/docs/assets/js/19.3ad98819.js"><link rel="prefetch" href="/docs/assets/js/2.ae27368c.js"><link rel="prefetch" href="/docs/assets/js/21.36cdd361.js"><link rel="prefetch" href="/docs/assets/js/22.4aa75a26.js"><link rel="prefetch" href="/docs/assets/js/23.7ef65749.js"><link rel="prefetch" href="/docs/assets/js/24.68c31f06.js"><link rel="prefetch" href="/docs/assets/js/25.e8093458.js"><link rel="prefetch" href="/docs/assets/js/26.9b3d5160.js"><link rel="prefetch" href="/docs/assets/js/27.49731c3e.js"><link rel="prefetch" href="/docs/assets/js/28.088092fe.js"><link rel="prefetch" href="/docs/assets/js/29.aa7e5e8b.js"><link rel="prefetch" href="/docs/assets/js/3.6d766960.js"><link rel="prefetch" href="/docs/assets/js/30.eb665e3e.js"><link rel="prefetch" href="/docs/assets/js/31.689d2ea2.js"><link rel="prefetch" href="/docs/assets/js/32.a392c481.js"><link rel="prefetch" href="/docs/assets/js/33.d2522848.js"><link rel="prefetch" href="/docs/assets/js/34.aa4639d9.js"><link rel="prefetch" href="/docs/assets/js/35.adc1e67d.js"><link rel="prefetch" href="/docs/assets/js/36.491d0cd7.js"><link rel="prefetch" href="/docs/assets/js/37.971f54e4.js"><link rel="prefetch" href="/docs/assets/js/38.9aef59d3.js"><link rel="prefetch" href="/docs/assets/js/4.3303e275.js"><link rel="prefetch" href="/docs/assets/js/5.2f93edc5.js"><link rel="prefetch" href="/docs/assets/js/6.c7dedc4d.js"><link rel="prefetch" href="/docs/assets/js/7.96a508ce.js"><link rel="prefetch" href="/docs/assets/js/8.5a49c366.js"><link rel="prefetch" href="/docs/assets/js/9.eebca368.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.9a4817a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Flarum Documentation</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/extend/" class="nav-link router-link-active">Extend</a></div><div class="nav-item"><a href="https://api.flarum.dev/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API Reference
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Flarum</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://flarum.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://discuss.flarum.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/flarum/flarum/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/extend/" class="nav-link router-link-active">Extend</a></div><div class="nav-item"><a href="https://api.flarum.dev/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API Reference
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Flarum</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://flarum.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://discuss.flarum.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/flarum/flarum/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Main Concepts</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/docs/extend/" class="sidebar-link">Extending Flarum</a></li><li><a href="/docs/extend/start.html" class="sidebar-link">Getting Started</a></li><li><a href="/docs/extend/frontend.html" class="sidebar-link">Frontend Development</a></li><li><a href="/docs/extend/routes.html" class="active sidebar-link">Routes and Content</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/extend/routes.html#backend-routes" class="sidebar-link">Backend Routes</a></li><li class="sidebar-sub-header"><a href="/docs/extend/routes.html#frontend-routes" class="sidebar-link">Frontend Routes</a></li><li class="sidebar-sub-header"><a href="/docs/extend/routes.html#content" class="sidebar-link">Content</a></li></ul></li><li><a href="/docs/extend/data.html" class="sidebar-link">Working with Data</a></li><li><a href="/docs/extend/distribution.html" class="sidebar-link">Distribution</a></li><li><a href="/docs/extend/update-b8.html" class="sidebar-link">Updating For Beta 8</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Advanced Guides</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/docs/extend/authorization.html" class="sidebar-link">Authorization</a></li><li><a href="/docs/extend/console.html" class="sidebar-link">Console</a></li><li><a href="/docs/extend/formatting.html" class="sidebar-link">Formatting</a></li><li><a href="/docs/extend/i18n.html" class="sidebar-link">Internationalization</a></li><li><a href="/docs/extend/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/docs/extend/notifications.html" class="sidebar-link">Notifications</a></li><li><a href="/docs/extend/permissions.html" class="sidebar-link">Permissions</a></li><li><a href="/docs/extend/post-types.html" class="sidebar-link">Post Types</a></li><li><a href="/docs/extend/search.html" class="sidebar-link">Search</a></li><li><a href="/docs/extend/settings.html" class="sidebar-link">Settings</a></li><li><a href="/docs/extend/testing.html" class="sidebar-link">Testing</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="routes-and-content"><a href="#routes-and-content" aria-hidden="true" class="header-anchor">#</a> Routes and Content</h1> <p>A fundamental part of extending Flarum is adding routes — both to expose new resources in the JSON-API, and to add new pages to the frontend.</p> <p>Routing happens on both the PHP backend and the JavaScript frontend.</p> <h2 id="backend-routes"><a href="#backend-routes" aria-hidden="true" class="header-anchor">#</a> Backend Routes</h2> <p>On the backend, Flarum has three collections of routes:</p> <ul><li><p><code>forum</code> These routes are accessible under <code>yourforum.com/</code>. They include routes that show pages in the frontend (like <code>yourforum.com/d/123-title</code>) and other utility routes (like the reset password route).</p></li> <li><p><code>admin</code> These routes are accessible under <code>yourforum.com/admin/</code>. By default, there is only one <code>admin</code> route on the backend; the rest of the admin routing happens on the frontend.</p></li> <li><p><code>api</code> These routes are accessible under <code>yourforum.com/api/</code> and make up Flarum's JSON:API.</p></li></ul> <h3 id="defining-routes"><a href="#defining-routes" aria-hidden="true" class="header-anchor">#</a> Defining Routes</h3> <p>You can add routes to any of these collections using the <code>Routes</code> extender. Pass the name of the collection in the extender's constructor, then call its methods to add routes.</p> <p>There are methods to register routes for any HTTP request method: <code>get</code>, <code>post</code>, <code>put</code>, <code>patch</code>, and <code>delete</code>. All of these methods accept three arguments:</p> <ul><li><code>$path</code> The route path using <a href="https://github.com/nikic/FastRoute#defining-routes" target="_blank" rel="noopener noreferrer">FastRoute<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> syntax.</li> <li><code>$name</code> A unique name for the route, used for generating URLs. To avoid conflicts with other extensions, you should use your vendor name as a namespace.</li> <li><code>$handler</code> The name of the controller class that will handle the request. This will be resolved through the container.</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Extend</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Acme<span class="token punctuation">\</span>HelloWorld<span class="token punctuation">\</span>HelloWorldController</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Extend<span class="token punctuation">\</span>Routes</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'forum'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/hello-world'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'acme.hello-world'</span><span class="token punctuation">,</span> HelloWorldController<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="controllers"><a href="#controllers" aria-hidden="true" class="header-anchor">#</a> Controllers</h3> <p>In Flarum, <strong>Controller</strong> is just another name for a class that implements <a href="https://github.com/php-fig/http-server-handler/blob/master/src/RequestHandlerInterface.php" target="_blank" rel="noopener noreferrer">RequestHandlerInterface<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Put simply, a controller must implement a <code>handle</code> method which receives a <a href="https://github.com/php-fig/http-message/blob/master/src/ServerRequestInterface.php" target="_blank" rel="noopener noreferrer">Request<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and must return a <a href="https://github.com/php-fig/http-message/blob/master/src/ResponseInterface.php" target="_blank" rel="noopener noreferrer">Response<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Flarum includes <a href="https://github.com/zendframework/zend-diactoros" target="_blank" rel="noopener noreferrer">zend-diactoros<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> which contains <code>Response</code> implementations that you can return.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Acme<span class="token punctuation">\</span>HelloWorld</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Message<span class="token punctuation">\</span>ResponseInterface</span> <span class="token keyword">as</span> Response<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Message<span class="token punctuation">\</span>ServerRequestInterface</span> <span class="token keyword">as</span> Request<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Server<span class="token punctuation">\</span>RequestHandlerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Zend<span class="token punctuation">\</span>Diactoros<span class="token punctuation">\</span>Response<span class="token punctuation">\</span>HtmlResponse</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">HelloWorldController</span> <span class="token keyword">implements</span> <span class="token class-name">RequestHandlerInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Response
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HtmlResponse</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'&lt;h1&gt;Hello, world!&lt;/h1&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Controllers are resolved from the <a href="https://laravel.com/docs/5.7/container" target="_blank" rel="noopener noreferrer">container<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> so you can inject dependencies into their constructors.</p> <h3 id="route-parameters"><a href="#route-parameters" aria-hidden="true" class="header-anchor">#</a> Route Parameters</h3> <p>Sometimes you will need to capture segments of the URI within your route. You may do so by defining route parameters using the <a href="https://github.com/nikic/FastRoute#defining-routes" target="_blank" rel="noopener noreferrer">FastRoute<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> syntax:</p> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Extend<span class="token punctuation">\</span>Routes</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'forum'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/user/{id}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'acme.user'</span><span class="token punctuation">,</span> UserController<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</code></pre></div><p>The values of these parameters will be merged with the request's query params, which you can access in your controller by calling <code>$request-&gt;getQueryParams()</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$id</span> <span class="token operator">=</span> <span class="token function">array_get</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="generating-urls"><a href="#generating-urls" aria-hidden="true" class="header-anchor">#</a> Generating URLs</h3> <p>You can generate URLs to any of the defined routes using the <code>Flarum\Http\UrlGenerator</code> class. Inject an instance of this into your controller or view, and call the <code>to</code> method to select a route collection. Then, you can generate a URL to a route using the name you gave it when it was defined. You can pass an array of parameters as the second argument. Parameters will fill in matching URI segments, otherwise they will be appended as query params.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$url</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">url</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'forum'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'acme.user'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// http://yourforum.com/user/123?foo=bar</span>
</code></pre></div><h3 id="views"><a href="#views" aria-hidden="true" class="header-anchor">#</a> Views</h3> <p>You can inject is Laravel's <a href="https://laravel.com/docs/5.7/views" target="_blank" rel="noopener noreferrer">View<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> factory into your controller. This will allow you to render a <a href="https://laravel.com/docs/5.7/blade" target="_blank" rel="noopener noreferrer">Blade template<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> into your controller's response.</p> <p>First, you will need to tell the factory where it can find your extension's view files by adding a closure to <code>extend.php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>View<span class="token punctuation">\</span>Factory</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span>Factory <span class="token variable">$view</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$view</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addNamespace</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'acme.hello-world'</span><span class="token punctuation">,</span> <span class="token constant">__DIR__</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>Then, inject the factory into your controller and render your view into an <code>HtmlResponse</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">HelloWorldController</span> <span class="token keyword">implements</span> <span class="token class-name">RequestHandlerInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$view</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>Factory <span class="token variable">$view</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">view</span> <span class="token operator">=</span> <span class="token variable">$view</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Response
    <span class="token punctuation">{</span>
        <span class="token variable">$view</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">view</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'acme.hello-world::greeting'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HtmlResponse</span><span class="token punctuation">(</span><span class="token variable">$view</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="api-controllers"><a href="#api-controllers" aria-hidden="true" class="header-anchor">#</a> API Controllers</h3> <p>The <code>Flarum\Api\Controller</code> namespace contains a number of abstract controller classes that you can extend to easily implement new JSON-API resources. See <a href="/docs/extend/data.html">Working with Data</a> for more information.</p> <h2 id="frontend-routes"><a href="#frontend-routes" aria-hidden="true" class="header-anchor">#</a> Frontend Routes</h2> <p>Adding routes to the frontend actually requires you to register them on <em>both</em> the frontend and the backend. This is because when your route is visited, the backend needs to know to serve up the frontend, and the frontend needs to know what to display on the page.</p> <p>On the backend, instead of adding your frontend route via the <code>Routes</code> extender, you should use the <code>Frontend</code> extender's <code>route</code> method. This always assumes <code>GET</code> as the method, and accepts a route path and name as the first two arguments:</p> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Extend<span class="token punctuation">\</span>Frontend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'forum'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/users'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'acme.users'</span><span class="token punctuation">)</span>
</code></pre></div><p>Now when <code>yourforum.com/users</code> is visited, the forum frontend will be displayed. However, since the frontend doesn't yet know about the <code>users</code> route, the discussion list will still be rendered.</p> <p>To register the route on the frontend, there is a <code>Routes</code> extender which works much like the backend one. Instead of a controller, however, you pass a component instance as the third argument:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> extend <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">Extend<span class="token punctuation">.</span>Routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token string">'acme.users'</span><span class="token punctuation">,</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UsersPage</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>Now when <code>yourforum.com/users</code> is visited, the forum frontend will be loaded and the <code>UsersPage</code> component will be rendered in the content area.</p> <h3 id="route-parameters-2"><a href="#route-parameters-2" aria-hidden="true" class="header-anchor">#</a> Route Parameters</h3> <p>Frontend routes also allow you to capture segments of the URI, but the <a href="https://mithril.js.org/archive/v0.2.5/mithril.route.html#defining-routes" target="_blank" rel="noopener noreferrer">Mithril route syntax<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is slightly different:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>  <span class="token keyword">new</span> <span class="token class-name">Extend<span class="token punctuation">.</span>Routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'/user/:id'</span><span class="token punctuation">,</span> <span class="token string">'acme.user'</span><span class="token punctuation">,</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UsersPage</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span>
</code></pre></div><p>Route parameters will be passed into the <code>props</code> of the route's component.</p> <h3 id="generating-urls-2"><a href="#generating-urls-2" aria-hidden="true" class="header-anchor">#</a> Generating URLs</h3> <p>To generate a URL to a route on the frontend, use the <code>app.route</code> method. This accepts two arguments: the route name, and a hash of parameters. Parameters will fill in matching URI segments, otherwise they will be appended as query params.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'acme.user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span> foo<span class="token punctuation">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// http://yourforum.com/users/123?foo=bar</span>
</code></pre></div><h2 id="content"><a href="#content" aria-hidden="true" class="header-anchor">#</a> Content</h2> <p>Whenever you visit a frontend route, the backend constructs a HTML document with the scaffolding necessary to boot up the frontend JavaScript application. You can easily modify this document to perform tasks like:</p> <ul><li>Changing the <code>&lt;title&gt;</code> of the page</li> <li>Adding external JavaScript and CSS resources</li> <li>Adding SEO content and <code>&lt;meta&gt;</code> tags</li> <li>Adding data to the JavaScript payload (eg. to preload resources which are going to be rendered on the page immediately, thereby preventing an unnecessary request to the API)</li></ul> <p>You can make blanket changes to the frontend using the <code>Frontend</code> extender's <code>content</code> method. This accepts a closure which receives two parameters: a <code>Flarum\Frontend\Document</code> object which represents the HTML document that will be dispalyed, and the <code>Request</code> object.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Frontend<span class="token punctuation">\</span>Document</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Message<span class="token punctuation">\</span>ServerRequestInterface</span> <span class="token keyword">as</span> Request<span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Extend<span class="token punctuation">\</span>Frontend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'forum'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>Document <span class="token variable">$document</span><span class="token punctuation">,</span> Request <span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$document</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">head</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'&lt;script&gt;alert(&quot;Hello, world!&quot;)&lt;/script&gt;'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also add content onto your frontend route registrations:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Extend<span class="token punctuation">\</span>Frontend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'forum'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/users'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'acme.users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Document <span class="token variable">$document</span><span class="token punctuation">,</span> Request <span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$document</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">title</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'Users'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/flarum/docs/edit/master/docs/extend/routes.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/21/2018, 6:04:02 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/extend/frontend.html" class="prev">
          Frontend Development
        </a></span> <span class="next"><a href="/docs/extend/data.html">
          Working with Data
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/docs/assets/js/20.1af116b1.js" defer></script><script src="/docs/assets/js/app.2d2bdfc6.js" defer></script>
  </body>
</html>
