<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Notifications | Flarum Documentation</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.9a4817a9.css" as="style"><link rel="preload" href="/docs/assets/js/app.2d2bdfc6.js" as="script"><link rel="preload" href="/docs/assets/js/17.a393edcc.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.cda0d58d.js"><link rel="prefetch" href="/docs/assets/js/11.84d80c34.js"><link rel="prefetch" href="/docs/assets/js/12.39fe881a.js"><link rel="prefetch" href="/docs/assets/js/13.50cb6f88.js"><link rel="prefetch" href="/docs/assets/js/14.acd375b2.js"><link rel="prefetch" href="/docs/assets/js/15.8f178b07.js"><link rel="prefetch" href="/docs/assets/js/16.8da54367.js"><link rel="prefetch" href="/docs/assets/js/18.3be6cf7d.js"><link rel="prefetch" href="/docs/assets/js/19.3ad98819.js"><link rel="prefetch" href="/docs/assets/js/2.ae27368c.js"><link rel="prefetch" href="/docs/assets/js/20.1af116b1.js"><link rel="prefetch" href="/docs/assets/js/21.36cdd361.js"><link rel="prefetch" href="/docs/assets/js/22.4aa75a26.js"><link rel="prefetch" href="/docs/assets/js/23.7ef65749.js"><link rel="prefetch" href="/docs/assets/js/24.68c31f06.js"><link rel="prefetch" href="/docs/assets/js/25.e8093458.js"><link rel="prefetch" href="/docs/assets/js/26.9b3d5160.js"><link rel="prefetch" href="/docs/assets/js/27.49731c3e.js"><link rel="prefetch" href="/docs/assets/js/28.088092fe.js"><link rel="prefetch" href="/docs/assets/js/29.aa7e5e8b.js"><link rel="prefetch" href="/docs/assets/js/3.6d766960.js"><link rel="prefetch" href="/docs/assets/js/30.eb665e3e.js"><link rel="prefetch" href="/docs/assets/js/31.689d2ea2.js"><link rel="prefetch" href="/docs/assets/js/32.a392c481.js"><link rel="prefetch" href="/docs/assets/js/33.d2522848.js"><link rel="prefetch" href="/docs/assets/js/34.aa4639d9.js"><link rel="prefetch" href="/docs/assets/js/35.adc1e67d.js"><link rel="prefetch" href="/docs/assets/js/36.491d0cd7.js"><link rel="prefetch" href="/docs/assets/js/37.971f54e4.js"><link rel="prefetch" href="/docs/assets/js/38.9aef59d3.js"><link rel="prefetch" href="/docs/assets/js/4.3303e275.js"><link rel="prefetch" href="/docs/assets/js/5.2f93edc5.js"><link rel="prefetch" href="/docs/assets/js/6.c7dedc4d.js"><link rel="prefetch" href="/docs/assets/js/7.96a508ce.js"><link rel="prefetch" href="/docs/assets/js/8.5a49c366.js"><link rel="prefetch" href="/docs/assets/js/9.eebca368.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.9a4817a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Flarum Documentation</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/extend/" class="nav-link router-link-active">Extend</a></div><div class="nav-item"><a href="https://api.flarum.dev/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API Reference
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Flarum</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://flarum.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://discuss.flarum.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/flarum/flarum/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/extend/" class="nav-link router-link-active">Extend</a></div><div class="nav-item"><a href="https://api.flarum.dev/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API Reference
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Flarum</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://flarum.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://discuss.flarum.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/flarum/flarum/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Main Concepts</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/docs/extend/" class="sidebar-link">Extending Flarum</a></li><li><a href="/docs/extend/start.html" class="sidebar-link">Getting Started</a></li><li><a href="/docs/extend/frontend.html" class="sidebar-link">Frontend Development</a></li><li><a href="/docs/extend/routes.html" class="sidebar-link">Routes and Content</a></li><li><a href="/docs/extend/data.html" class="sidebar-link">Working with Data</a></li><li><a href="/docs/extend/distribution.html" class="sidebar-link">Distribution</a></li><li><a href="/docs/extend/update-b8.html" class="sidebar-link">Updating For Beta 8</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Advanced Guides</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/docs/extend/authorization.html" class="sidebar-link">Authorization</a></li><li><a href="/docs/extend/console.html" class="sidebar-link">Console</a></li><li><a href="/docs/extend/formatting.html" class="sidebar-link">Formatting</a></li><li><a href="/docs/extend/i18n.html" class="sidebar-link">Internationalization</a></li><li><a href="/docs/extend/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/docs/extend/notifications.html" class="active sidebar-link">Notifications</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/extend/notifications.html#notification-types" class="sidebar-link">Notification Types</a></li><li class="sidebar-sub-header"><a href="/docs/extend/notifications.html#rendering-notifications" class="sidebar-link">Rendering Notifications</a></li><li class="sidebar-sub-header"><a href="/docs/extend/notifications.html#sending-notifications" class="sidebar-link">Sending Notifications</a></li></ul></li><li><a href="/docs/extend/permissions.html" class="sidebar-link">Permissions</a></li><li><a href="/docs/extend/post-types.html" class="sidebar-link">Post Types</a></li><li><a href="/docs/extend/search.html" class="sidebar-link">Search</a></li><li><a href="/docs/extend/settings.html" class="sidebar-link">Settings</a></li><li><a href="/docs/extend/testing.html" class="sidebar-link">Testing</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="notifications"><a href="#notifications" aria-hidden="true" class="header-anchor">#</a> Notifications</h1> <p>Flarum includes a powerful notification system to alert users to new activity.</p> <h2 id="notification-types"><a href="#notification-types" aria-hidden="true" class="header-anchor">#</a> Notification Types</h2> <h3 id="defining-a-notification-type"><a href="#defining-a-notification-type" aria-hidden="true" class="header-anchor">#</a> Defining a Notification Type</h3> <p>To define a notification type, you will need to create a new class which implements <code>Flarum\Notification\Blueprint\BlueprintInterface</code>. This class will define your notification's content and behaviour through the following methods:</p> <ul><li><code>getSubject()</code> The model that the notification is about (eg. the <code>Post</code> that was liked).</li> <li><code>getSender()</code> The <code>User</code> model for the user that triggered the notification.</li> <li><code>getData()</code> Any other data you might wish to include for access on the frontend (eg. the old discussion title when renamed).</li> <li><code>getType()</code> This is where you name your notification, this will be important for later steps.</li> <li><code>getSubjectModal()</code>: Specify the type of model the subject is (from <code>getSubject</code>).</li></ul> <p>Lets take a look at an example from <a href="https://github.com/flarum/likes/blob/master/src/Notification/PostLikedBlueprint.php" target="_blank" rel="noopener noreferrer">Flarum Likes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Flarum<span class="token punctuation">\</span>Likes<span class="token punctuation">\</span>Notification</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Notification<span class="token punctuation">\</span>Blueprint<span class="token punctuation">\</span>BlueprintInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Post<span class="token punctuation">\</span>Post</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>User<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PostLikedBlueprint</span> <span class="token keyword">implements</span> <span class="token class-name">BlueprintInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token variable">$post</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token variable">$user</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>Post <span class="token variable">$post</span><span class="token punctuation">,</span> User <span class="token variable">$user</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">post</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">user</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">post</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getSender</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">user</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token single-quoted-string string">'postLiked'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">getSubjectModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Post<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Take a look at <a href="https://github.com/flarum/core/blob/master/src/Notification/Blueprint/DiscussionRenamedBlueprint.php" target="_blank" rel="noopener noreferrer"><code>DiscussionRenamedBlueprint</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> if you want another example.</p> <h3 id="registering-a-notification-type"><a href="#registering-a-notification-type" aria-hidden="true" class="header-anchor">#</a> Registering a Notification Type</h3> <p>Next, let's register your notification so Flarum knows about it. This will allow users to be able to change how they want to be notified of your notification.</p> <p>The event you want to listen for is <a href="https://github.com/flarum/core/blob/master/src/Event/ConfigureNotificationTypes.php" target="_blank" rel="noopener noreferrer"><code>ConfigureNotificationTypes</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>You are going to want to use the <code>$event-&gt;add()</code> function which accepts 3 arguments:</p> <ul><li><code>$blueprint</code>: Your class static (example: <code>PostLikedBlueprint::class</code>)</li> <li><code>$serializer</code>: The serializer of your subject model (example: <code>PostSerializer::class</code>)</li> <li><code>$enabledByDefault</code>: This is where you set which notification methods will be enabled by default. It accepts an array of strings, include 'alert' to have forum notifications (the bell icon), include 'email' for email notifications. You can use, one both, or none! (example: <code>['alert']</code> would set only in-forum notifications on by default)</li></ul> <p>Lets look at an example from <a href="https://github.com/flarum/subscriptions/blob/master/src/Listener/SendNotificationWhenReplyIsPosted.php" target="_blank" rel="noopener noreferrer">Flarum Subscriptions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token comment">/*
 * This file is part of Flarum.
 *
 * (c) Toby Zerner &lt;toby.zerner@gmail.com&gt;
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */</span>

<span class="token keyword">namespace</span> <span class="token package">Flarum<span class="token punctuation">\</span>Subscriptions<span class="token punctuation">\</span>Listener</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Api<span class="token punctuation">\</span>Serializer<span class="token punctuation">\</span>BasicDiscussionSerializer</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Event<span class="token punctuation">\</span>ConfigureNotificationTypes</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Subscriptions<span class="token punctuation">\</span>Notification<span class="token punctuation">\</span>NewPostBlueprint</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Events<span class="token punctuation">\</span>Dispatcher</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">SendNotificationWhenReplyIsPosted</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span>Dispatcher <span class="token variable">$events</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$events</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">listen</span><span class="token punctuation">(</span>ConfigureNotificationTypes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$this</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'addNotificationType'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">addNotificationType</span><span class="token punctuation">(</span>ConfigureNotificationTypes <span class="token variable">$event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$event</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">add</span><span class="token punctuation">(</span>NewPostBlueprint<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span> BasicDiscussionSerializer<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'alert'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Your notification is coming together nicely! Just a few things left to do!</p> <h2 id="rendering-notifications"><a href="#rendering-notifications" aria-hidden="true" class="header-anchor">#</a> Rendering Notifications</h2> <p>As with everything in Flarum, what we register in the backend, must be registered in the frontend as well.</p> <p>Similar to the notification blueprint, we need tell Flarum how we want our notification displayed.</p> <p>First, create a class that extends the notification component. Then, there are 4 functions to add:</p> <ul><li><code>icon()</code>: The <a href="https://fontawesome.com/" target="_blank" rel="noopener noreferrer">Font Awesome<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> icon that will appear next to the notification text (example: <code>fas fa-code-branch</code>).</li> <li><code>href()</code>: The link that should be opened when the notification is clicked (example: <code>app.route.post(this.props.notification.subject())</code>).</li> <li><code>content()</code>: What the notification itself should show. It should say the username and then the action. It will be followed by when the notification was sent (make sure to use translations).</li> <li><code>exerpt()</code>: (optional) A little excerpt that is shown below the notification (commonly an excerpt of a post).</li></ul> <p><em>Let take a look at our example shall we?</em></p> <p>From <a href="https://github.com/flarum/subscriptions/blob/master/js/src/forum/components/NewPostNotification.js" target="_blank" rel="noopener noreferrer">Flarum Subscriptions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, when a new post is posted on a followed discussion:</p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> Notification <span class="token keyword">from</span> <span class="token string">'flarum/components/Notification'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> username <span class="token keyword">from</span> <span class="token string">'flarum/helpers/username'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">NewPostNotification</span> <span class="token keyword">extends</span> <span class="token class-name">Notification</span> <span class="token punctuation">{</span>
  <span class="token function">icon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'fas fa-star'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">href</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> notification <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notification<span class="token punctuation">;</span>
    <span class="token keyword">const</span> discussion <span class="token operator">=</span> notification<span class="token punctuation">.</span><span class="token function">subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> content <span class="token operator">=</span> notification<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> app<span class="token punctuation">.</span>route<span class="token punctuation">.</span><span class="token function">discussion</span><span class="token punctuation">(</span>discussion<span class="token punctuation">,</span> content<span class="token punctuation">.</span>postNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> app<span class="token punctuation">.</span>translator<span class="token punctuation">.</span><span class="token function">trans</span><span class="token punctuation">(</span><span class="token string">'flarum-subscriptions.forum.notifications.new_post_text'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>user<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>notification<span class="token punctuation">.</span><span class="token function">sender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the example, the icon is a star, the link will go to the new post, and the content will say that &quot;{user} posted&quot;.</p> <p>Next, we need to tell Flarum that the notification you send in the backend corresponds to the frontend notification we just created.</p> <p>Open up your index.js (the forum one) and start off by importing your newly created notification template. Then add the following line:</p> <p><code>app.notificationComponents.{nameOfNotification} = {NotificationTemplate};</code></p> <p>Make sure to replace <code>{nameOfNotification}</code> with the name of the notification in your PHP blueprint (<code>getType()</code>) and replace <code>{NotificationTemplate}</code> with the name of the JS notification template we just made! (Make sure it's imported!)</p> <p>Let's give users an option to change their settings for your notification. All you have to do is extend the <a href="https://github.com/flarum/core/blob/master/js/src/forum/components/NotificationGrid.js" target="_blank" rel="noopener noreferrer"><code>notificationGird</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>'s <a href="https://github.com/flarum/core/blob/master/js/src/forum/components/NotificationGrid.js#L204" target="_blank" rel="noopener noreferrer"><code>notificationTypes()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> function</p> <p>From <a href="https://github.com/flarum/likes/blob/master/js/src/forum/index.js" target="_blank" rel="noopener noreferrer">Flarum-Likes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> extend <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'flarum/extend'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> app <span class="token keyword">from</span> <span class="token string">'flarum/app'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> NotificationGrid <span class="token keyword">from</span> <span class="token string">'flarum/components/NotificationGrid'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> PostLikedNotification <span class="token keyword">from</span> <span class="token string">'./components/PostLikedNotification'</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span>initializers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'flarum-likes'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span>notificationComponents<span class="token punctuation">.</span>postLiked <span class="token operator">=</span> PostLikedNotification<span class="token punctuation">;</span>

  <span class="token function">extend</span><span class="token punctuation">(</span>NotificationGrid<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'notificationTypes'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    items<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'postLiked'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'postLiked'</span><span class="token punctuation">,</span>
      icon<span class="token punctuation">:</span> <span class="token string">'far fa-thumbs-up'</span><span class="token punctuation">,</span>
      label<span class="token punctuation">:</span> app<span class="token punctuation">.</span>translator<span class="token punctuation">.</span><span class="token function">trans</span><span class="token punctuation">(</span><span class="token string">'flarum-likes.forum.settings.notify_post_liked_label'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Simply add the name of your notification (from the blueprint), an icon you want to show, and a description of the notification and you are all set!</p> <h2 id="sending-notifications"><a href="#sending-notifications" aria-hidden="true" class="header-anchor">#</a> Sending Notifications</h2> <p><em>Data doesn't just appear in the database magically</em></p> <p>Now that you have your notification all setup, it's time to actually send the notification to the user!</p> <p>Thankfully, this is the easiest part, simply use<a href="https://github.com/flarum/core/blob/master/src/Notification/NotificationSyncer.php" target="_blank" rel="noopener noreferrer"><code>NotificationSyncer</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>'s sync function. It accepts 2 arguments:</p> <ul><li><code>BlueprintInterface</code>: This is the blueprint to be instantiated we made in the first step, you must include all variables that are used on the blueprint (example: if a user likes a post you must include the <code>user</code> model that liked the post).</li> <li><code>$users</code>: This accepts an array of <code>user</code> modals that should receive the notification</li></ul> <p><em>Whats that? You want to be able to delete notifications too?</em> The easiest way to remove a notification is to pass the exact same data as sending a notification, except with an empty array of recipients.</p> <p>Lets take a look at our <strong>final</strong> example for today:</p> <p>From <a href="https://github.com/flarum/likes/blob/master/src/Listener/SendNotificationWhenPostIsLiked.php" target="_blank" rel="noopener noreferrer">Flarum Likes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Flarum<span class="token punctuation">\</span>Likes<span class="token punctuation">\</span>Listener</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Event<span class="token punctuation">\</span>ConfigureNotificationTypes</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Likes<span class="token punctuation">\</span>Event<span class="token punctuation">\</span>PostWasLiked</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Likes<span class="token punctuation">\</span>Event<span class="token punctuation">\</span>PostWasUnliked</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Likes<span class="token punctuation">\</span>Notification<span class="token punctuation">\</span>PostLikedBlueprint</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Notification<span class="token punctuation">\</span>NotificationSyncer</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>Post<span class="token punctuation">\</span>Post</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flarum<span class="token punctuation">\</span>User<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Events<span class="token punctuation">\</span>Dispatcher</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">SendNotificationWhenPostIsLiked</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$notifications</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>NotificationSyncer <span class="token variable">$notifications</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">notifications</span> <span class="token operator">=</span> <span class="token variable">$notifications</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span>Dispatcher <span class="token variable">$events</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$events</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">listen</span><span class="token punctuation">(</span>PostWasLiked<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$this</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'whenPostWasLiked'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$events</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">listen</span><span class="token punctuation">(</span>PostWasUnliked<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$this</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'whenPostWasUnliked'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">whenPostWasLiked</span><span class="token punctuation">(</span>PostWasLiked <span class="token variable">$event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">syncNotification</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">post</span><span class="token punctuation">,</span> <span class="token variable">$event</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">user</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$event</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">post</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">user</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">whenPostWasUnliked</span><span class="token punctuation">(</span>PostWasUnliked <span class="token variable">$event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">syncNotification</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">post</span><span class="token punctuation">,</span> <span class="token variable">$event</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">user</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">syncNotification</span><span class="token punctuation">(</span>Post <span class="token variable">$post</span><span class="token punctuation">,</span> User <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token keyword">array</span> <span class="token variable">$recipients</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span> <span class="token operator">!=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">notifications</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sync</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">PostLikedBlueprint</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token variable">$recipients</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><strong>Awesome!</strong> Now you can spam users with updates on happenings around the forum!</p> <p><em>Tried everything?</em> Well if you've tried everything then I guess... Kidding. Feel free to post in the <a href="https://discuss.flarum.org/t/extensibility" target="_blank" rel="noopener noreferrer">Flarum Community<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or in the <a href="https://flarum.org/discord" target="_blank" rel="noopener noreferrer">Discord<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and someone will be around to lend a hand!</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/flarum/docs/edit/master/docs/extend/notifications.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/21/2018, 6:04:02 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        
        <a href="/docs/extend/middleware.html" class="prev">
          Middleware
        </a></span> <span class="next"><a href="/docs/extend/permissions.html">
          Permissions
        </a>
        
      </span></p></div> </div> <!----></div></div>
    <script src="/docs/assets/js/17.a393edcc.js" defer></script><script src="/docs/assets/js/app.2d2bdfc6.js" defer></script>
  </body>
</html>
